import axios from "axios";
import { useEffect, useContext } from "react";
import { DataContext } from "../../context";

export default (url, importData = "") => {
          const fetchData = useContext(DataContext)
          const baseUrl = "https://www.themealdb.com/api/json/v1/1/"
          // let [data, setData] = useState("")
          let isCancelled = false
          useEffect(() => {
                    axios.get(baseUrl + url + importData)
                              .then((response) => {
                                        if (!isCancelled) fetchData.setFetchData(importData ? response.data.meals : response.data.meals[0])
                              })
                    return () => {
                              isCancelled = true;
                    };
          }, [])
          return [fetchData]
}